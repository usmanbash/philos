{% comment %}
Section: Featured Pages List
Description: This section displays a list of featured pages with images and links.

Usage:
- This section is used to display a list of featured pages with images and links,
  on home page.
- This section has no settings, only blocks.
- Each block contains the settings for a featured page
- Max number of blocks is 3

Accepts:
- Blocks:
  - Featured_Page_List_Item: A block that contains the settings for a featured page.
    - Page_URL: A URL field for the link to the featured page.
    - Link_Name: A text field for the name of the link
    - Image: An image picker field for selecting an image to display alongside the link.
    - Max_Blocks: 3

@TODO
  - Decide about the max number of blocks
  - Decide about additional image settings for the block. Currently, it's just an image picker,
    but we might want to add one more settings for the image
    (case: PHILOS RUNNING ARMOUR link with two images).
  - Remove link_name_suffix from the block settings, intead add dynamic suffix (solution)
    to the link_name.
{% endcomment %}

{% liquid
  # section padding
  assign section_padding = section.settings.padding | default: 'md'
  assign section_padding_class = ''
  if section_padding == 'sm'
    assign section_padding_class = 'py-24 lg:py-32'
  elsif section_padding == 'md'
    assign section_padding_class = 'py-32 lg:py-48'
  elsif section_padding == 'lg'
    assign section_padding_class = 'py-40 lg:py-64'
  endif
%}

<section
  x-data="featuredPagesList()"
  class="featured-pages-list relative w-full px-6 {{ section_padding_class }} z-20">

  {%- comment -%} Content (blocks) Wrapper {%- endcomment -%}
  <div class="flex flex-col items-center justify-center w-full">
    {% for block in section.blocks %}
      <div class="item-wrapper mb-8 sm:mb-0 last:mb-0">
        {%- comment -%} Block {%- endcomment -%}
        {% render 'featured-pages-list-item',
          link_url: block.settings.link_url,
          link_name: block.settings.link_name,
          image_src: block.settings.image,
          index: forloop.index
        %}
      </div>
    {% endfor %}
  </div>

</section>

{% schema %}
{
  "name": "Featured Pages List",
  "tag": "section",
  "settings": [
    {
      "type": "select",
      "id": "padding",
      "label": "Section Padding",
      "options": [
        { "value": "sm", "label": "Small" },
        { "value": "md", "label": "Medium" },
        { "value": "lg", "label": "Large" }
      ],
      "default": "md"
    }
  ],
  "blocks": [
    {
      "type": "featured_pages_list_item",
      "name": "Featured Pages List Item",
      "settings": [
        {
          "type": "url",
          "label": "Link Url",
          "id": "link_url"
        },
        {
          "type": "text",
          "label": "Link Name",
          "id": "link_name"
        },
        {
          "type": "image_picker",
          "label": "Image",
          "id": "image"
        }
      ]
    }
  ],
  "max_blocks": 3,
  "presets": [
    {
      "name": "Featured Pages List"
    }
  ]
}
{% endschema %}
