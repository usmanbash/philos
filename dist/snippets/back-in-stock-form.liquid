{% doc %}
  Renders the back-in-stock form.
{% enddoc %}

{%- liquid
  # Parameter validation and defaults
-%}
<form 
  x-data="backInStockForm({})"
  class="flex flex-col gap-4 w-full"
  @submit.prevent="onSubmit">

  {% comment %} debug {% endcomment %}
  {% comment %} 
  <div class="debug border-1 p-2 bg-black/10">
    <div class="text-14 flex justify-between">Variant ID: <span x-text="variantId" /></div>
    <div class="text-14 flex justify-between">Composite ID: <span x-text="variantCompositeId" /></div>
  </div>
  {% endcomment %}
  

  {% comment %} field: email {% endcomment %}
  <div class='w-full pb-2'>
    <label
      class='block mb-2 text-black font-proximaNova text-16 sr-only'
      for='bis_email'>
      {{ 'bis.email_label' | t | default: 'Email' }}
    </label>
    <input
      id='bis_email'
      type='email'
      name='email'
      x-ref='email'
      x-model='email'
      required
      placeholder="{{ 'bis.email_placeholder' | t | default: 'Enter your email...' }}"
      class='field__input relative block w-full border-b border-black py-3 px-1 leading-tight appearance-none bg-white text-16 text-black'>
    <template x-if="emailError">
      <p class='mt-2 text-red text-14' x-text="emailError"></p>
    </template>
  </div>
  
  {% comment %} submit button {% endcomment %}
  <button
    type='submit'
    aria-label='{{ 'bis.submit' | t }}'
    :disabled='isSubmitting'
    class='w-full px-[24px] py-[16px] xl:py-4 text-white3 bg-black lg:hover:bg-white2 lg:hover:text-black border border-black transition-colors uppercase text-[16px]'>
    <span x-show="!isSubmitting">{{ 'bis.submit' | t | default: 'Notify me' }}</span>
    <span x-show="isSubmitting">{{ 'bis.loading' | t | default: 'Submitting...' }}</span>
  </button>

  <template x-if="submissionMessage">
    <p class='mt-2 text-green text-14' x-text="submissionMessage"></p>
  </template>

</form>