{%- comment -%}
Snippet: Legal Pages Navigation Mobile
Description: This snippet creates a sidebar for legal pages.
It uses the linklist that is set in the section settings to populate the navigation.
There is mobile and desktop version of the nav.
Mobile version is a dropdown (accordion) menu.

Accepts:
- menu: The name of the linklist that will be used to populate the navigation

Usage:
{% render 'legal-pages-navigation-mobile', menu: 'support' %}

{%- endcomment -%}

{% liquid
  assign links = linklists[menu].links
  assign current_page_path = request.path
  assign inner_links_html = ""
  assign current_page_title = ""
%}

<nav
  x-data="legalPagesNavigationMobile"
  class="legal-pages-nav--mobile w-full border border-gray lg:hidden py-4 px-6">
  <div class="font-proximaNova text-16 uppercase">
    {% if links %}
      {% for link in links %}

        {%- assign index = forloop.index -%}

        {% if link.url == current_page_path %}
          {% assign current_page_title = link.title %}
        {% endif %}
        {% endfor %}

        {% for inner_link in links %}
          {% unless inner_link.url == current_page_path %}
            {% assign link_html = "<a href='" | append: inner_link.url | append: "' aria-label='" |  append: inner_link.title |  append: "' class='content-item mt-4 text-sonicSilver text-16 uppercase'>" | append: inner_link.title | append: "</a>" %}
            {% assign inner_links_html = inner_links_html | append: link_html %}
          {% endunless %}
      {% endfor %}

      {% render 'accordion',
        title: current_page_title,
        content: inner_links_html,
        id: index,
        accordion_class: "flex items-center justify-between w-full",
        title_class: "text-16 font-medium uppercase",
        content_class: "flex flex-col",
        accordion_plus_class: "flex-shrink-0"
      %}
    {% endif %}
  </div>
</nav>


