{%- comment -%}
Snippet: Product Card
Description: A product card for displaying products in a grid.

Usage:
  {% render 'product-card', product: product %}

Accepts:
  product: The product object to display
{%- endcomment -%}

{% liquid

  assign text_color = ''
  if dark_text == true
    assign text_color = 'text-black'
  else
    assign text_color = 'text-white4'
  endif

if is_variant
    assign url = product.url
    assign image = product.featured_image | default: product.product.media[0]
    assign title = product.product.title | append: ' | ' | append: product.options[1]
    assign price = product.price
  else
    assign url = product.url
    assign image = product.media[0]
    assign title = product.title
    assign price = product.price
  endif

  assign available_product = product.available
  assign availability_status = ''
  if available_product
    assign availability_status = 'Available Now'
  else
    assign availability_status = 'Sold Out'
  endif

%}

<div
  x-data="productCard({
    url: '{{ url }}',
  })"
  class='product-media relative w-full'>
	<div class='overflow-hidden'>
		<div
      role="link"
      tabindex="0"
      class='inline-block cursor-pointer'
      @click.prevent="navigateToProductDetailPage">
			<div class='overflow-hidden flex aspect-[.82] bg-white4'>
				<div class="absolute top-0 right-0 p-3 text-font-base text-black z-10">
					<p>{{ availability_status }}</p>
				</div>

				{%- if image -%}
						<div class="transition duration-500 ease-in-out transform hover:scale-105 h-full w-full">
							{%-
								render 'scale-down-image',
								image: image,
			          alt: image.alt,
								inner_class: 'object-contain w-full h-full'
							-%}
						</div>
				{%- else -%}
					{{
						'product-1'
						| placeholder_svg_tag: 'object-cover w-full h-full bg-gray-100'
					}}
				{%- endif -%}
			</div>
		</div>
		<div class='flex flex-col pt-4 pr-2 min-h-[4em] text-16 {{ text_color }}'>
			<div
        role="link"
        tabindex="0"
				class='inline-block text-16 cursor-pointer'
				@click.prevent="navigateToProductDetailPage">
				{{- title -}}
			</div>
      {% comment %} @todo update price currency display {% endcomment %}
			<p>{{ price | money_without_trailing_zeros }}</p>
		</div>
	</div>
</div>
