{%- comment -%}
Snippet: Product FAQ
Description: This snippet renders the product FAQs section on the product page.
We are using the following metafield:
- custom.faq -> reference to the FAQ List Metaobject (one entry)

Metaobjects:
1. FAQ List (gaq_list.items) -> reference to the FAQ metaobject (multiple entries)
2. FAQ (faq) -> question (single line) and answer (rich text)
{%- endcomment -%}

<div x-data="productFaq()" class="product-details">

  {%- liquid
    # FAQ metafield that is a reference to the FAQ List Metaobject
    assign faq_metafield = product.metafields.custom.faq.value
    if faq_metafield != blank
      assign faq_items = faq_metafield.items.value
    endif
  -%}

  {%- if faq_items != blank -%}
    {% for metaobject in faq_items %}
      {%- case metaobject.system.type -%}
        {%- when 'faq' -%}

          {%- assign title = metaobject.question -%}
          {%- assign content = metaobject.answer | metafield_tag -%}

          {%- render 'accordion',
            title: title,
            content: content,
            accordion_wrapper_class: 'border-b border-gray text-black',
            accordion_class: "flex items-center justify-between py-4 cursor-pointer",
            title_class: "text-20 lg:text-24",
            content_class: "content pt-4 pb-10 text-16 lg:pr-40",
            accordion_plus_class: "flex-shrink-0",
            id: forloop.index
          %}

      {%- endcase -%}

    {% endfor %}
  {%- endif -%}

</div>
