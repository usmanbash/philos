{%- comment -%}
	Snippet: Text and Imagery Dark
	Description: A snippit that displays text and imagery.
  Primarily used on the About page.

  Accepts:
    - Block:
      - settings
        - reversed
        - text
        - image_1
        - image_2
        - image_3
        - image_4
  Usage:
    {% render 'text-and-imagery-dark',
      block: block
    %}
{%- endcomment -%}

{%- liquid
  # Variables
  assign is_reversed = block.settings.reversed
  assign text = block.settings.text

  # Check if the section has text
  assign has_text = false
  if text != blank
    assign has_text = true
  endif

  # Set the default classes for the text and image wrappers
  # based on the reversed setting
  if is_reversed
    assign order_class = 'lg:flex-row-reverse'
  else
    assign order_class = 'lg:flex-row'
  endif

  assign image_count = 0
  if block.settings.image_1
    assign image_count = image_count | plus: 1
  endif
  if block.settings.image_2
    assign image_count = image_count | plus: 1
  endif
  if block.settings.image_3
    assign image_count = image_count | plus: 1
  endif
  if block.settings.image_4
    assign image_count = image_count | plus: 1
  endif

  assign has_images = false
  if image_count > 0
    assign has_images = true
  endif

  # Add grid classes based on the number of blocks present
  if has_images
    case image_count
      when 1
        assign grid_classes = 'sm:grid-cols-1'
      when 2
        assign grid_classes = 'sm:grid-cols-2'
      when 3, 4
        assign grid_classes = 'sm:grid-cols-2 lg:grid-rows-2'
      else
        assign grid_classes = 'sm:grid-cols-1'
    endcase
  endif
-%}

<div x-data='textAndImageryDark' class='text-and-imagery-dark w-full h-full bg-charcoal lg:py-14 px-5 sm:px-10'>
  {%- comment -%} Content Wrapper {%- endcomment -%}
  <div class='flex flex-col flex-col-reverse {{ order_class }} lg:items-center gap-4 w-full h-full'>
    {%- comment -%} Text Wrapper {%- endcomment -%}
    <div
      data-scroll
      data-scroll-repeat
      data-scroll-call="inViewportAnimation"
      class='text-and-imagery__content-wrapper w-full h-full'>

      <div class='flex flex-col justify-center items-center w-full h-full px-14 py-24 sm:py-20 sm:px-16 lg:py-0 lg:px-44'>
        {%- comment -%} Text Content {%- endcomment -%}
        {% if has_text %}
          <div
            data-animate
            data-preset='fadeUp'
            class='text-and-imagery__text font-ivar text-sonicSilver text-center text-30 lg:text-46'>
            {{ text }}
          </div>
        {% endif %}

        {%- comment -%} Logo {%- endcomment -%}
        {% comment %}
        <div
          data-animate
          data-preset='fadeUp'
          data-to='{"delay": 0.1}'
          class="text-and-imagery__logo logo--white mt-16 lg:mt-16 hidden lg:block">
          {%- render 'icon-logo' -%}
        </div>
        {% endcomment %}

      </div>
    </div>

    {%- comment -%} Imagery Wrapper {%- endcomment -%}
    <div class='text-and-imagery__image-wrapper w-full h-full'>
      {%- comment -%} Image Blocks {%- endcomment -%}
      {%- if has_images -%}
        <div class='grid {{ grid_classes }} gap-4 h-full'>
          {% for i in (1..4) %}
            {%- assign block_image = 'image_' | append: i -%}
            {% if block.settings[block_image] %}
              {%-
                render 'scale-down-image',
                image:  block.settings[block_image],
                originalRatio: false,
                imgRatio: 0.8
              -%}
            {% endif %}
          {% endfor %}
        </div>
      {%- endif -%}
    </div>
  </div>
</div>
