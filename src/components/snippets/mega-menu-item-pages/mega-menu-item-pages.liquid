{%- comment -%}
Snippet: Mega Menu Item: Pages
Description: Renders a mega menu item with a headline, text, and up to 3 pages or articles.

Usage:
  {% render 'mega-menu-item-pages', block: block %}

Accepts:
  - block: the block object
{%- endcomment -%}
<div class="mega-menu-item mega-menu-item--pages flex flex-col lg:flex-row h-full w-full">
  <div class="lg:w-1/4 pr-10 xl:pr-32">
    {%- comment -%} First Column: Content{%- endcomment -%}
    <div class="flex flex-col w-full h-full justify-end">

      <h2 class="mb-8 font-ivar text-46">{{ block.settings.headline }}</h2>

      <div class="mb-8 pr-32 text-16">{{ block.settings.text }}</div>

    </div>
  </div>

  {%- comment -%} Page Cards {%- endcomment -%}
  <div class="w-3/4 flex flex-col lg:flex-row">
  {% for i in (1..3) %}
    {% assign page_handle = 'page_' | append: i %}
    {% if block.settings[page_handle] %}
      <div class="lg:w-1/3 lg:ml-5 first:ml-0">
        {% if page_handle == 'page_1' %}
          {% comment %} This is page_1, which is of type 'page' {% endcomment %}
          {% assign page = block.settings[page_handle] %}
          {% if page %}
            {%- comment -%} Get the image from a page metafields {%- endcomment -%}
            {%- assign image_src = page.metafields.custom.image -%}

            {% render 'menu-card',
              page_type: 'page',
              image: image_src,
              title: page.title,
              page_url: page.url
            %}
          {% endif %}

        {% else %}
          {% comment %} These are page_2 and page_3, which are of type 'article' {% endcomment %}
          {% assign article = block.settings[page_handle] %}
          {% if article %}
            {% render 'menu-card',
              image: article.image,
              title: article.title,
              page_url: article.url
            %}
          {% endif %}
        {% endif %}
      </div>
    {% endif %}
  {% endfor %}
  </div>

</div>
